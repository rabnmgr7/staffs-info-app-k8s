2024-03-30 14:02:06,092 p=31449 u=shesh n=ansible | Encryption successful
2024-04-01 15:20:50,539 p=22273 u=shesh n=ansible | ansible-playbook [core 2.16.5]
  config file = /home/shesh/Projects/final-project/staffs-info-app-k8s/ansible/ansible.cfg
  configured module search path = ['/home/shesh/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /home/shesh/.local/lib/python3.10/site-packages/ansible
  ansible collection location = /home/shesh/.ansible/collections:/usr/share/ansible/collections
  executable location = /home/shesh/.local/bin/ansible-playbook
  python version = 3.10.12 (main, Nov 20 2023, 15:14:05) [GCC 11.4.0] (/usr/bin/python3)
  jinja version = 3.1.2
  libyaml = True
2024-04-01 15:20:50,539 p=22273 u=shesh n=ansible | Using /home/shesh/Projects/final-project/staffs-info-app-k8s/ansible/ansible.cfg as config file
2024-04-01 15:20:50,811 p=22273 u=shesh n=ansible | redirecting (type: action) ansible.builtin.synchronize to ansible.posix.synchronize
2024-04-01 15:20:50,823 p=22273 u=shesh n=ansible | Skipping callback 'default', as we already have a stdout callback.
2024-04-01 15:20:50,823 p=22273 u=shesh n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2024-04-01 15:20:50,823 p=22273 u=shesh n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2024-04-01 15:20:50,823 p=22273 u=shesh n=ansible | PLAYBOOK: deploy.yaml ****************************************************************************************************************************
2024-04-01 15:20:50,823 p=22273 u=shesh n=ansible | 1 plays in deploy.yaml
2024-04-01 15:20:50,824 p=22273 u=shesh n=ansible | PLAY [create service play] ***********************************************************************************************************************
2024-04-01 15:20:50,836 p=22273 u=shesh n=ansible | TASK [Gathering Facts] ***************************************************************************************************************************
2024-04-01 15:20:54,528 p=22273 u=shesh n=ansible | ok: [web1]
2024-04-01 15:20:54,564 p=22273 u=shesh n=ansible | TASK [Remove existing directory] *****************************************************************************************************************
2024-04-01 15:20:55,349 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "cmd": ["rm", "-rf", "~/k8s/"], "delta": "0:00:00.008347", "end": "2024-04-01 09:35:55.273640", "msg": "", "rc": 0, "start": "2024-04-01 09:35:55.265293", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2024-04-01 15:20:55,365 p=22273 u=shesh n=ansible | TASK [Create directory] **************************************************************************************************************************
2024-04-01 15:20:58,000 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "cmd": ["mkdir", "-p", "~/k8s/"], "delta": "0:00:01.890611", "end": "2024-04-01 09:35:57.845414", "msg": "", "rc": 0, "start": "2024-04-01 09:35:55.954803", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2024-04-01 15:20:58,019 p=22273 u=shesh n=ansible | TASK [Copy script to remote hosts] ***************************************************************************************************************
2024-04-01 15:20:59,636 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "checksum": "19cc17a09d27f2e8f47f0173401cbb14c2d9fd5f", "dest": "/home/shesh/k8s/create-service.sh", "gid": 1007, "group": "shesh", "md5sum": "70a4a2c78d5b02e2e3e7b9aa04a309e1", "mode": "0755", "owner": "shesh", "size": 1191, "src": "/home/shesh/.ansible/tmp/ansible-tmp-1711964158.0937538-22333-157331141896969/source", "state": "file", "uid": 1006}
2024-04-01 15:20:59,655 p=22273 u=shesh n=ansible | redirecting (type: action) ansible.builtin.synchronize to ansible.posix.synchronize
2024-04-01 15:20:59,661 p=22273 u=shesh n=ansible | TASK [Copy k8s-specifications directory] *********************************************************************************************************
2024-04-01 15:20:59,694 p=22273 u=shesh n=ansible | redirecting (type: modules) ansible.builtin.synchronize to ansible.posix.synchronize
2024-04-01 15:20:59,696 p=22273 u=shesh n=ansible | redirecting (type: action) ansible.builtin.synchronize to ansible.posix.synchronize
2024-04-01 15:20:59,696 p=22273 u=shesh n=ansible | redirecting (type: action) ansible.builtin.synchronize to ansible.posix.synchronize
2024-04-01 15:20:59,714 p=22273 u=shesh n=ansible | [DEPRECATION WARNING]: The connection's stdin object is deprecated. Call display.prompt_until(msg) instead. This feature will be removed in 
version 2.19. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2024-04-01 15:21:00,676 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "cmd": "sshpass -d4 /usr/bin/rsync --delay-updates -F --compress --archive --rsh='/usr/bin/ssh -S none -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null' --out-format='<<CHANGED>>%i %n%L' /home/shesh/Projects/final-project/staffs-info-app-k8s/ansible/k8s-specifications 'shesh@192.168.1.102:~/k8s/'", "msg": "cd+++++++++ k8s-specifications/\n<f+++++++++ k8s-specifications/.config\n<f+++++++++ k8s-specifications/.env\n<f+++++++++ k8s-specifications/db-deployment.yaml\n<f+++++++++ k8s-specifications/db-service.yaml\n<f+++++++++ k8s-specifications/node-deployment.yaml\n<f+++++++++ k8s-specifications/node-service.yaml\n", "rc": 0, "stdout_lines": ["cd+++++++++ k8s-specifications/", "<f+++++++++ k8s-specifications/.config", "<f+++++++++ k8s-specifications/.env", "<f+++++++++ k8s-specifications/db-deployment.yaml", "<f+++++++++ k8s-specifications/db-service.yaml", "<f+++++++++ k8s-specifications/node-deployment.yaml", "<f+++++++++ k8s-specifications/node-service.yaml"]}
2024-04-01 15:21:00,693 p=22273 u=shesh n=ansible | TASK [show contents of k8s directory] ************************************************************************************************************
2024-04-01 15:21:01,373 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "cmd": ["ls", "~/k8s/"], "delta": "0:00:00.004555", "end": "2024-04-01 09:36:01.179125", "msg": "", "rc": 0, "start": "2024-04-01 09:36:01.174570", "stderr": "", "stderr_lines": [], "stdout": "create-service.sh\nk8s-specifications", "stdout_lines": ["create-service.sh", "k8s-specifications"]}
2024-04-01 15:21:01,392 p=22273 u=shesh n=ansible | TASK [Execute create-service.sh script] **********************************************************************************************************
2024-04-01 15:21:05,516 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "rc": 0, "stderr": "Shared connection to 192.168.1.102 closed.\r\n", "stderr_lines": ["Shared connection to 192.168.1.102 closed."], "stdout": "configmap/staffs-info-app-db-config created\r\nsecret/staffs-info-app-db-secret created\r\ndeployment.apps/staffs-info-app-db-deployment created\r\nservice/staffs-info-app-db-svc created\r\ndeployment.apps/staffs-info-app-node-deployment created\r\nservice/staffs-info-app-node-svc created\r\nNAME                              READY   UP-TO-DATE   AVAILABLE   AGE\r\nstaffs-info-app-db-deployment     0/1     1            0           1s\r\nstaffs-info-app-node-deployment   0/3     3            0           0s\r\nNAME                                             READY   STATUS              RESTARTS        AGE\r\nstaffs-info-app-db-deployment-6b4c55984f-825mf   0/1     ContainerCreating   0               2s\r\nstaffs-info-app-db-deployment-6b4c55984f-fn5qt   1/1     Terminating         2 (5m23s ago)   46h\r\nstaffs-info-app-node-deployment-57cbbf56-4ft59   0/1     ContainerCreating   0               1s\r\nstaffs-info-app-node-deployment-57cbbf56-cqz9r   1/1     Terminating         2 (5m23s ago)   46h\r\nstaffs-info-app-node-deployment-57cbbf56-fvxzd   0/1     ContainerCreating   0               1s\r\nstaffs-info-app-node-deployment-57cbbf56-h8h2z   1/1     Terminating         2 (5m23s ago)   46h\r\nstaffs-info-app-node-deployment-57cbbf56-pqc6b   0/1     ContainerCreating   0               1s\r\nstaffs-info-app-node-deployment-57cbbf56-zz5l6   1/1     Terminating         2 (5m23s ago)   46h\r\nForwarding from 0.0.0.0:30010 -> 8123\r\nNAME                       TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)           AGE\r\nkubernetes                 ClusterIP   10.96.0.1        <none>        443/TCP           5d17h\r\nstaffs-info-app-db-svc     ClusterIP   10.98.213.194    <none>        3306/TCP          2s\r\nstaffs-info-app-node-svc   NodePort    10.105.203.210   <none>        30010:30010/TCP   1s\r\n", "stdout_lines": ["configmap/staffs-info-app-db-config created", "secret/staffs-info-app-db-secret created", "deployment.apps/staffs-info-app-db-deployment created", "service/staffs-info-app-db-svc created", "deployment.apps/staffs-info-app-node-deployment created", "service/staffs-info-app-node-svc created", "NAME                              READY   UP-TO-DATE   AVAILABLE   AGE", "staffs-info-app-db-deployment     0/1     1            0           1s", "staffs-info-app-node-deployment   0/3     3            0           0s", "NAME                                             READY   STATUS              RESTARTS        AGE", "staffs-info-app-db-deployment-6b4c55984f-825mf   0/1     ContainerCreating   0               2s", "staffs-info-app-db-deployment-6b4c55984f-fn5qt   1/1     Terminating         2 (5m23s ago)   46h", "staffs-info-app-node-deployment-57cbbf56-4ft59   0/1     ContainerCreating   0               1s", "staffs-info-app-node-deployment-57cbbf56-cqz9r   1/1     Terminating         2 (5m23s ago)   46h", "staffs-info-app-node-deployment-57cbbf56-fvxzd   0/1     ContainerCreating   0               1s", "staffs-info-app-node-deployment-57cbbf56-h8h2z   1/1     Terminating         2 (5m23s ago)   46h", "staffs-info-app-node-deployment-57cbbf56-pqc6b   0/1     ContainerCreating   0               1s", "staffs-info-app-node-deployment-57cbbf56-zz5l6   1/1     Terminating         2 (5m23s ago)   46h", "Forwarding from 0.0.0.0:30010 -> 8123", "NAME                       TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)           AGE", "kubernetes                 ClusterIP   10.96.0.1        <none>        443/TCP           5d17h", "staffs-info-app-db-svc     ClusterIP   10.98.213.194    <none>        3306/TCP          2s", "staffs-info-app-node-svc   NodePort    10.105.203.210   <none>        30010:30010/TCP   1s"]}
2024-04-01 15:21:05,530 p=22273 u=shesh n=ansible | TASK [Remove existing directory] *****************************************************************************************************************
2024-04-01 15:21:06,398 p=22273 u=shesh n=ansible | changed: [web1] => {"changed": true, "cmd": ["rm", "-rf", "~/k8s/"], "delta": "0:00:00.004326", "end": "2024-04-01 09:36:06.224649", "msg": "", "rc": 0, "start": "2024-04-01 09:36:06.220323", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
2024-04-01 15:21:06,453 p=22273 u=shesh n=ansible | PLAY RECAP ***************************************************************************************************************************************
2024-04-01 15:21:06,453 p=22273 u=shesh n=ansible | web1                       : ok=8    changed=7    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
